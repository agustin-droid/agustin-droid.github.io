const productos = [
    {
        id: 900,
        marca: "Bullpadel",
        nombre: "Mochila Bullpadel Performance Marino",
        precio: 80000,
        tipo: "mochila",
        descripcion: "La mochila Mochila Bullpadel Performance Marino de Bullpadel ofrece estilo, comodidad y funcionalidad para el día a día.",
        imagenes: [
            "/front/paletas/bolsos/foto1.webp", 
            "/front/paletas/bolsos/foto2.webp"
        ]
    },
    {
        id: 901,
        marca: "Bullpadel",
        nombre: "Mochila Bullpadel Performance Ciruela",
        precio: 80000,
        tipo: "mochila",
        descripcion: "La mochila Mochila Bullpadel Performance Ciruela de Bullpadel ofrece estilo, comodidad y funcionalidad para el día a día.",
        imagenes: [
            "/front/paletas/bolsos/foto5.webp",
            "/front/paletas/bolsos/foto6.webp"
        ]
    },
    {
        id: 907,
        marca: "Bullpadel",
        nombre: "Bolso Bullpadel Tour Azul Marino",
        precio: 90000,
        tipo: "bolso",
        descripcion: "El bolso Bullpadel Tour Azul Marino combina funcionalidad y diseño elegante para transportar todo lo necesario a la cancha con estilo.",
        imagenes: [
            "/front/paletas/bolsos/foto29.webp",
            "/front/paletas/bolsos/foto30.webp"
                ]
    },
    {
        id: 912,
        marca: "Varlion",
        nombre: "Bolso Varlion Begins Marino",
        precio: 96000,
        tipo: "bolso",
        descripcion: "El bolso Varlion Begins Marino ofrece practicidad y diseño deportivo para quienes buscan funcionalidad y elegancia.",
        imagenes: [
            "/front/paletas/bolsos/foto49.webp",
            "/front/paletas/bolsos/foto50.webp",
            "/front/paletas/bolsos/foto51.webp"
        ]
    }
    ,
    {
        id: 905,
        marca: "Bullpadel",
        nombre: "Mochila Bullpadel XPLO Rojo",
        precio: 122000,
        tipo: "mochila",
        descripcion: "La mochila Bullpadel XPLO Rojo de Bullpadel combina diseño moderno y funcionalidad, ideal para llevar todo tu equipamiento de pádel cómodamente.",
        imagenes: [
            "/front/paletas/bolsos/foto21.webp",
            "/front/paletas/bolsos/foto22.webp",
            "/front/paletas/bolsos/foto23.webp"

        ]
    },
    {
        id: 902,
        marca: "Dropshot",
        nombre: "Bolso Dropshot Ambition Rojo",
        precio: 130000,
        tipo: "bolso",
        descripcion: "El bolso Bolso Dropshot Ambition Rojo de Dropshot ofrece estilo, comodidad y funcionalidad para el día a día.",
        imagenes: [
            "/front/paletas/bolsos/foto17.webp",
            "/front/paletas/bolsos/foto18.webp",
            "/front/paletas/bolsos/foto19.webp"

        ]
    },
    {
        id: 909,
        marca: "Bullpadel",
        nombre: "Bolso Bullpadel Performance Ciruela",
        precio: 130000,
        tipo: "bolso",
        descripcion: "Diseñado para el rendimiento, el bolso Bullpadel Performance Ciruela destaca por su durabilidad, amplio espacio y estilo moderno.",
        imagenes: [
            "/front/paletas/bolsos/foto37.webp",
            "/front/paletas/bolsos/foto38.webp",
            "/front/paletas/bolsos/foto39.webp"
        ]
    },
    
{
    id: 911,
    marca: "Bullpadel",
    nombre: "Bolso Bullpadel Casual Negro",
    precio: 150000,
    tipo: "bolso",
    descripcion: "Con un diseño urbano y elegante, el bolso Bullpadel Casual Negro se adapta tanto a la cancha como al día a día.",
    imagenes: [
        "/front/paletas/bolsos/foto45.webp",
        "/front/paletas/bolsos/foto46.webp",
        "/front/paletas/bolsos/foto47.webp"
    ]
},
    
    {
        id: 908,
        marca: "Bullpadel",
        nombre: "Bolso Bullpadel Xplo Negro",
        precio: 155000,
        tipo: "bolso",
        descripcion: "El bolso Bullpadel Xplo Negro es una opción moderna y resistente, ideal para jugadores que buscan organización y comodidad.",
        imagenes: [
            "/front/paletas/bolsos/foto33.webp",
            "/front/paletas/bolsos/foto34.webp",
            "/front/paletas/bolsos/foto35.webp"
        ]
    },
    
    {
        id: 906,
        marca: "Bullpadel",
        nombre: "Bolso Bullpadel Next Bag Naranja",
        precio: 172000,
        tipo: "bolso",
        descripcion: "El bolso Bullpadel Next Bag Naranja de Bullpadel ofrece gran capacidad y resistencia, ideal para jugadores exigentes que buscan rendimiento y estilo.",
        imagenes: [
            "/front/paletas/bolsos/foto25.webp",
            "/front/paletas/bolsos/foto26.webp"
        ]
    }
    ,
    {
        id: 903,
        marca: "Varlion",
        nombre: "Bolso Varlion Ambassadors Mike Yanguas",
        precio: 190000,
        tipo: "bolso",
        descripcion: "El bolso Bolso Varlion Ambassadors Mike Yanguas de Varlion ofrece estilo, comodidad y funcionalidad para el día a día.",
        imagenes: [
            "/front/paletas/bolsos/foto9.webp",
            "/front/paletas/bolsos/foto10.webp"
        ]
    },
    {
        id: 910,
        marca: "Bullpadel",
        nombre: "Bolso Bullpadel Hack Blanco",
        precio: 200000,
        tipo: "bolso",
        descripcion: "El bolso Bullpadel Hack Blanco es ideal para los jugadores más exigentes, ofreciendo capacidad, resistencia y un diseño impactante.",
        imagenes: [
            "/front/paletas/bolsos/foto43.webp",
            "/front/paletas/bolsos/foto41.webp",
            "/front/paletas/bolsos/foto42.webp"
        ]
    },
    {
        id: 904,
        marca: "Head",
        nombre: "Bolso Head Pro X Padel Blanco",
        precio: 226000,
        tipo: "bolso",
        descripcion: "El bolso Bolso Head Pro X Padel Blanco de Head ofrece estilo, comodidad y funcionalidad para el día a día.",
        imagenes: [
            "/front/paletas/bolsos/foto13.webp",
            "/front/paletas/bolsos/foto14.webp",
            "/front/paletas/bolsos/foto15.webp"


        ]
    }
];





document.addEventListener("DOMContentLoaded", function () {
    mostrarProductos("Bolsos");
});

function mostrarProductos() {
    const contenedor = document.getElementById("productos-container");
    contenedor.innerHTML = "";

    const productosFiltrados = productos
        .filter(p => p.tipo === "bolso" || p.tipo === "mochila")
        .sort((a, b) => a.precio - b.precio);




    productosFiltrados.forEach((producto, index) => {
        const imagenes = producto.imagenes;
        const id = `carrusel-${index}`;
        const productoHTML = `
            <div class="tarjeta-producto">
                <div class="carrusel" id="${id}">
                    <button class="carrusel-btn prev" data-index="${index}">&#10094;</button>
                    <img src="${imagenes[0]}" class="imagen-carrusel" id="img-${index}" alt="${producto.nombre}">
                    <button class="carrusel-btn next" data-index="${index}">&#10095;</button>
                </div>
                <div class="info-producto">
                    <h3>${producto.nombre}</h3>
                    <p><strong>Descripción: </strong>${producto.descripcion}</p>

                    <p><strong>Precio:</strong> $${producto.precio.toLocaleString()}</p>
                    <p><strong>Tipo:</strong> ${producto.tipo}</p>
                </div>
            </div>
        `;

        contenedor.innerHTML += productoHTML;
    });

    inicializarCarruseles(productosFiltrados);
    inicializarModal();
}

function inicializarCarruseles(productos) {
    const estadoCarrusel = productos.map(() => 0);

    document.querySelectorAll('.carrusel-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const index = parseInt(btn.dataset.index);
            const tipo = btn.classList.contains('next') ? 1 : -1;
            const total = productos[index].imagenes.length;

            estadoCarrusel[index] = (estadoCarrusel[index] + tipo + total) % total;

            const img = document.getElementById(`img-${index}`);
            img.src = productos[index].imagenes[estadoCarrusel[index]];
        });
    });
}

function inicializarModal(productosFiltrados) {
    const modal = document.getElementById("modal");
    const modalImg = document.getElementById("modal-img");
    const closeModal = document.querySelector(".close");
    const prevBtn = document.getElementById("prev");
    const nextBtn = document.getElementById("next");

    let imagenesActuales = [];
    let imagenIndex = 0;

    document.querySelectorAll("#productos-container .imagen-carrusel").forEach(img => {
        img.style.cursor = "pointer";
        img.addEventListener("click", function () {
            const index = parseInt(this.id.split("-")[1]);
            const producto = productos[index]; // Ahora accedemos bien al producto

            if (!producto) return;

            imagenesActuales = producto.imagenes;
            imagenIndex = imagenesActuales.findIndex(src => src === this.src);

            if (imagenIndex === -1) {
                imagenIndex = 0;
            }

            mostrarImagen();
        });
    });

    function mostrarImagen() {
        if (imagenesActuales.length > 0) {
            modalImg.src = imagenesActuales[imagenIndex];
        }
        modal.style.display = "flex";
    }

    nextBtn.addEventListener("click", function () {
        imagenIndex = (imagenIndex + 1) % imagenesActuales.length;
        mostrarImagen();
    });

    prevBtn.addEventListener("click", function () {
        imagenIndex = (imagenIndex - 1 + imagenesActuales.length) % imagenesActuales.length;
        mostrarImagen();
    });

    document.addEventListener("keydown", function (event) {
        if (modal.style.display === "flex") {
            if (event.key === "ArrowRight") {
                imagenIndex = (imagenIndex + 1) % imagenesActuales.length;
            } else if (event.key === "ArrowLeft") {
                imagenIndex = (imagenIndex - 1 + imagenesActuales.length) % imagenesActuales.length;
            }
            mostrarImagen();
        }
    });

    closeModal.addEventListener("click", function () {
        modal.style.display = "none";
    });

    modal.addEventListener("click", function (event) {
        if (event.target === modal) {
            modal.style.display = "none";
        }
    });
}







